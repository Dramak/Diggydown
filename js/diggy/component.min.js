Crafty.c("Grid", {init: function () {
    this.attr({w: Game.map_grid.tile.width, h: Game.map_grid.tile.height})
}, at: function (a, b) {
    if (a === undefined && b === undefined) {
        return{x: this.x / Game.map_grid.tile.width, y: this.y / Game.map_grid.tile.height}
    } else {
        this.attr({x: a * Game.map_grid.tile.width, y: b * Game.map_grid.tile.height});
        return this
    }
}});
Crafty.c("Actor", {init: function () {
    this.requires("2D, Canvas, Grid")
}});
Crafty.c("Sky", {init: function () {
    this.requires("Actor, Color");
    this.color("rgb(182, 229, 240)")
}});
Crafty.c("Rock", {init: function () {
    this.requires("Actor, Color, Solid");
    this.color("rgb(150, 150, 150)")
}, mine: function () {
    this.destroy()
}});
Crafty.c("PlayerCharacter", {init: function () {
    this.requires("Actor, Fourway, Color,Collision").fourway(4).color("rgb(20, 75, 40)").stopOnSolids()
}, stopOnSolids: function () {
    this.onHit("Rock", this.mine);
    this.onHit("Solid", this.stopMovement);
    return this
}, mine: function (a) {
    a[0].obj.mine();
    this.stopMovement()
}, stopMovement: function () {
    this._speed = 0;
    if (this._movement) {
        this.x -= this._movement.x;
        this.y -= this._movement.y
    }
}});